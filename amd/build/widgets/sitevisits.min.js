/**
 * Site visits - chart init.
 *
 * @module     report_lmsace_reports/sitevisits
 * @copyright  2023 LMSACE <https://lmsace.com>
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define(["jquery","core/ajax","core/loadingicon","core/chartjs","report_lmsace_reports/chartjs-plugin-datalabels"],function(t,a,e){var s=null,i=t(".site-visits-block .loadiconElement");var l=function(t,a,e){let i=document.getElementById("site-visits-chart");if(i){var l=t.getRandomColors(["c7"],".5",!0),o=t.getRandomColors(["c7"]),r=t.getRandomColors(["c4"],".5",!0),d=t.getRandomColors(["c4"]),n=t.getRandomColors(["c6"],".5",!0),c=t.getRandomColors(["c6"]),u={options:t.getMultiDatasetOptions(),data:{datasets:[{label:i.dataset.sitevisits,data:e.sitevisits,backgroundColor:l,borderColor:o,fill:!0,datalabels:{align:-45}},{label:i.dataset.coursevisits,data:e.coursevisits,backgroundColor:r,borderColor:d,fill:!0,datalabels:{align:"left"}},{label:i.dataset.modulevisits,data:e.modulevisits,backgroundColor:n,borderColor:c,fill:!0,datalabels:{align:45}}]}};s=t.buildChart(i,"line",a,null,null,u)}},o=function(t){t||(t="week");var s={methodname:"report_lmsace_reports_site_visits",args:{filter:t,chartid:"sitevisitswidget"}},l=a.call([s])[0];l.done(function(t){r(t)}),e.addIconToContainerRemoveOnCompletion(i,l)},r=function(t){s.data.labels=t.label,s.data.datasets[0].data=t.value.sitevisits,s.data.datasets[1].data=t.value.coursevisits,s.data.datasets[2].data=t.value.modulevisits,s.update()};return{init:function(a){if("undefined"==typeof sitevisits)return null;var e=sitevisits.label,s=sitevisits.value;return l(a,e,s),t(".site-visits-block .dropdown-menu a").click(function(a){a.preventDefault();var e=t(this).text(),s=t(this).attr("data-value");t(this).closest(".dropdown-menu").find(".dropdown-item").removeClass("active"),t(this).addClass("active"),t(this).parents(".dropdown").find(".lmsace-filter-btn").html('<i class="fa fa-filter"></i> '+e),o(s)}),!0}}});
//# sourceMappingURL=sitevisits.min.js.map