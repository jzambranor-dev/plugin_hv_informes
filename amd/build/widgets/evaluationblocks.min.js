/**
 * Evaluation blocks widget.
 *
 * @module     report_lmsace_reports/widgets/evaluationblocks
 * @copyright  2023 LMSACE <https://lmsace.com>
 * @license    http://www.gnu.org/copyleft/gpl.html GNU GPL v3 or later
 */
define("report_lmsace_reports/widgets/evaluationblocks",[],(function(){return{init:function(main){var chartEl=document.getElementById("evaluation-passfail-chart");if(chartEl){var passed=parseInt(chartEl.getAttribute("data-passed"))||0,failed=parseInt(chartEl.getAttribute("data-failed"))||0,notcompleted=parseInt(chartEl.getAttribute("data-notcompleted"))||0;if(passed>0||failed>0||notcompleted>0){var bgColors=main.getRandomColors(["c6","c3","c5"],"",!1);main.buildChart(chartEl.getContext("2d"),"doughnut",["Passed","Failed","No attempt"],[passed,failed,notcompleted],bgColors)}}var modtypeFilter=document.getElementById("eval-modtype-filter"),applyBtn=document.getElementById("eval-apply-filter"),clearBtn=document.getElementById("eval-clear-filter");applyBtn&&applyBtn.addEventListener("click",(function(){var url=new URL(window.location.href);modtypeFilter&&(modtypeFilter.value?url.searchParams.set("evalmodtype",modtypeFilter.value):url.searchParams.delete("evalmodtype"));var datefrom=document.getElementById("eval-datefrom"),dateto=document.getElementById("eval-dateto");datefrom&&datefrom.value?url.searchParams.set("evalfrom",Math.floor(new Date(datefrom.value).getTime()/1e3)):url.searchParams.delete("evalfrom"),dateto&&dateto.value?url.searchParams.set("evalto",Math.floor(new Date(dateto.value+"T23:59:59").getTime()/1e3)):url.searchParams.delete("evalto"),url.searchParams.delete("evalcmid"),window.location.href=url.toString()})),clearBtn&&clearBtn.addEventListener("click",(function(){var url=new URL(window.location.href);url.searchParams.delete("evalmodtype"),url.searchParams.delete("evalfrom"),url.searchParams.delete("evalto"),url.searchParams.delete("evalcmid"),window.location.href=url.toString()}))}}}));
